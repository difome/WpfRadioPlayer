<UserControl x:Class="RadioPlayer.Controls.PlayerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:RadioPlayer.Controls"
             mc:Ignorable="d"
             d:DesignHeight="100" d:DesignWidth="700">
    <Grid Background="#1F1F1F" Height="100" MouseWheel="VolumeSlider_MouseWheel">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Margin="16,3,16,16" VerticalAlignment="Center"
                    Cursor="Hand" MouseLeftButtonDown="StackPanel_MouseLeftButtonDown">
            <TextBlock x:Name="TrackText" FontSize="15" Foreground="White"
                       FontWeight="Bold" Margin="0,0,0,4"
                       HorizontalAlignment="Stretch" TextWrapping="Wrap"/>
            <TextBlock x:Name="ArtistText" FontSize="12" Foreground="White" Margin="0,0,0,8"
                       HorizontalAlignment="Stretch" TextWrapping="Wrap"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <Slider Grid.Column="0" x:Name="VolumeSlider" Minimum="0" Maximum="1"
                        Value="{Binding Volume, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                        VerticalAlignment="Center" Margin="2,0,8,0" Cursor="Hand"
                        ValueChanged="VolumeSlider_ValueChanged"
                        IsMoveToPointEnabled="True" Height="24"
                        FocusVisualStyle="{x:Null}">
                    <Slider.Style>
                        <Style TargetType="Slider">
                            <Setter Property="Height" Value="10"/>
                            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Slider">
                                        <Grid>
                                            <!-- Серый фон с закруглениями -->
                                            <Border Background="#595959" CornerRadius="5" Height="10"
                                                    HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                                            <Track x:Name="PART_Track">
                                                <Track.Thumb>
                                                    <Thumb x:Name="Thumb" Width="20" Height="20" VerticalAlignment="Center"
                                                           FocusVisualStyle="{x:Null}">
                                                        <Thumb.Template>
                                                            <ControlTemplate TargetType="Thumb">
                                                                <Grid>
                                                                    <Ellipse Width="16" Height="16" Fill="#EDCC48"
                                                                             VerticalAlignment="Center" HorizontalAlignment="Center">
                                                                        <Ellipse.Effect>
                                                                            <DropShadowEffect BlurRadius="3"
                                                                                               ShadowDepth="1"
                                                                                               Opacity="0.4"/>
                                                                        </Ellipse.Effect>
                                                                    </Ellipse>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Thumb.Template>
                                                    </Thumb>
                                                </Track.Thumb>
                                                <Track.DecreaseRepeatButton>
                                                    <RepeatButton Command="Slider.DecreaseLarge"
                                                                  Style="{x:Null}"
                                                                  Background="Transparent"
                                                                  Focusable="False">
                                                        <RepeatButton.Template>
                                                            <ControlTemplate TargetType="RepeatButton">
                                                                <!-- Желтое заполнение слева с закруглением -->
                                                                <Border Background="#EDCC48"
                                                                        CornerRadius="5"
                                                                        Height="10"
                                                                        VerticalAlignment="Center"
                                                                        HorizontalAlignment="Stretch"/>
                                                            </ControlTemplate>
                                                        </RepeatButton.Template>
                                                    </RepeatButton>
                                                </Track.DecreaseRepeatButton>
                                                <Track.IncreaseRepeatButton>
                                                    <RepeatButton Command="Slider.IncreaseLarge"
                                                                  Style="{x:Null}"
                                                                  Background="Transparent"
                                                                  Focusable="False">
                                                        <RepeatButton.Template>
                                                            <ControlTemplate TargetType="RepeatButton">
                                                                <!-- Прозрачная область справа -->
                                                                <Border Background="Transparent" Height="10"/>
                                                            </ControlTemplate>
                                                        </RepeatButton.Template>
                                                    </RepeatButton>
                                                </Track.IncreaseRepeatButton>
                                            </Track>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Slider.Style>
                </Slider>
                <TextBlock Grid.Column="1" x:Name="VolumeText" Text="50%" FontSize="10" Foreground="White" Margin="4,0,0,0"
                           VerticalAlignment="Center"/>
            </Grid>
        </StackPanel>

        <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="16,16,25,16"
                    VerticalAlignment="Center" HorizontalAlignment="Right">
            <Button Content="НАЗАД" Style="{StaticResource PlayerButtonStyle}"
                    Command="{Binding PreviousCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    x:Name="PrevButton" Margin="0,0,8,0"/>

            <Button Content="ПАУЗА"
                    Command="{Binding PauseCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    x:Name="PauseButton" Margin="0,0,8,0">
                <Button.Style>
                    <Style TargetType="Button" BasedOn="{StaticResource PlayerButtonStyle}">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsPlaying, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsPaused, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button Content="ИГРАТЬ"
                    Command="{Binding PlayCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    x:Name="PlayButton" Margin="0,0,8,0">
                <Button.Style>
                    <Style TargetType="Button" BasedOn="{StaticResource PlayerButtonStyle}">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsPlaying, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsPaused, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button Content="СТОП"
                    Command="{Binding StopCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    x:Name="StopButton" Margin="0,0,8,0">
                <Button.Style>
                    <Style TargetType="Button" BasedOn="{StaticResource PlayerButtonStyle}">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsPlaying, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsPaused, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button Content="ВПЕРЕД" Style="{StaticResource PlayerButtonStyle}"
                    Command="{Binding NextCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    x:Name="NextButton"/>
        </StackPanel>

        <controls:ToastNotification x:Name="ToastNotificationControl"/>
    </Grid>
</UserControl>
